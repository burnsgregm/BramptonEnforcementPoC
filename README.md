# Brampton By-Law Operations Co-Pilot (PoC)

![Status: Prototype](httpsa://img.shields.io/badge/Status-Prototype-blue.svg)

This repository contains a functional, "best-in-class" prototype for the **City of Brampton's "Proactive Enforcement Response"** AI Proof of Concept.

The prototype is a multi-page Streamlit dashboard that demonstrates a complete, end-to-end "data flywheel". It showcases how AI can solve both of the city's stated goals:
1.  **Part A (Analytics):** "Analyzing... complaint trends" for prioritization.
2.  **Part B (Generation):** "Generating personalized, resident-friendly closure messages" to "lower staff workload".

This app demonstrates expertise across four distinct AI domains: **Data Analytics, Generative AI (Text), Audio Transcription (Speech-to-Text), and Computer Vision (Object Detection).**

---

## ðŸš€ Live Demo

A live version of this prototype, deployed via Streamlit Community Cloud, is accessible here:

**[https://bramptonenforcement.streamlit.app](https://bramptonenforcement.streamlit.app)**

*(Note: The live demo requires a `GEMINI_API_KEY` to be set in the Streamlit Cloud secrets.)*

---

## âœ¨ Features

This prototype is a multi-page application that simulates an entire workflow.

### 1. Page 1: ðŸ“Š Analytics & Prioritization Dashboard
This page demonstrates the "Part A" analytics requirement.
* **Live Metrics:** Displays key metrics like "Total Open Complaints" and "Top Complaint Type" from the mock `complaints.csv`.
* **Trend Analysis:** Shows interactive bar charts for "Complaints by Type" and "Complaints by Ward."
* **AI Hotspot Map:** Simulates the "predictive hotspot" feature by plotting the GPS coordinates of all open complaints. Includes a toggle to show "biased" (311-only) vs. "unbiased" (311 + Proactive CV) data, proving the "data flywheel" concept.
* **Interactive Log:** A full `st.data_editor` table of all 100 mock complaints, with built-in search, sort, and filtering.

### 2. Page 2: ðŸ‘©â€âš–ï¸ Case Management Workflow
This page demonstrates the "Part B" generative AI workflow.
* **AI Officer Briefing:** A user selects a "Complaint ID," and the app runs a Generative AI summarizer to create a 1-paragraph "on-site briefing" from the (often long and complex) "CaseHistory (Internal)" field.
* **AI Closure Message:** An officer selects an "Official Finding" (e.g., "Violation found, warning issued"), and the app uses a second GenAI prompt to draft a "personalized, resident-friendly" closure message, stripping all internal jargon.

### 3. Page 3: âœ¨ "Wow" - Proactive Detection
This page showcases the advanced, proactive data *generation* capabilities identified in the research.
* **ðŸŽ™ï¸ AI Call Intake ("Auto311"):** Demonstrates the "Zero-Touch" intake pipeline. A user uploads a sample `.m4a` file of a 311 call, and the app uses **OpenAI Whisper** to transcribe it, then **Gemini** to extract the key entities into a structured JSON object.
* **ðŸ“¸ AI Violation Detection ("Stockton Model"):** Simulates the "Stockton Model" of proactive CV detection. A user uploads an image of a by-law violation (like graffiti or debris), and the app uses a pre-trained **YOLOv8 model** (from the Pothole PoC) to identify it and log a "Proactive Case."
* **ðŸ—ºï¸ AI Hotspotting (Simulation):** A tab on the analytics page that visually demonstrates the "squeaky wheel" bias of 311-only data vs. the more equitable map generated by including proactive CV data.

---

## ðŸ›  Tech Stack

* **App Framework:** Streamlit
* **Data Handling:** Pandas
* **AI Orchestration:** LangChain
* **Generative AI:** Google Gemini (via `langchain-google-genai`)
* **Audio Transcription:** `openai-whisper`
* **Computer Vision:** `ultralytics` (YOLOv8)
* **Video/Image Processing:** `opencv-python-headless`
* **System Dependencies:** `ffmpeg` (for audio)
* **Build/Deployment:** Google Colab, Git, Streamlit Community Cloud

---

## ðŸ­ Project Reproduction (The "Colab Factory")

The entire Streamlit application (all 4 `.py` files, `requirements.txt`, `packages.txt`) and the mock `complaints.csv` data are generated and deployed from a single, reproducible Google Colab notebook: `BramptonEnforcement_Factory.ipynb`.

### How to Run This Project:

1.  **Clone the Repo:**
    ```bash
    git clone [https://github.com/burnsgregm/BramptonEnforcementPoC.git](https://github.com/burnsgregm/BramptonEnforcementPoC.git)
    cd BramptonEnforcementPoC
    ```
2.  **Upload Data Files:**
    In the `data/` folder of your cloned repo, you must upload 3 files (as described in the notebook's `1.2` step):
    * `pothole_model.pt` (your trained YOLO model from the Pothole PoC)
    * `sample_call.m4a` (a mock 311 call audio file)
    * `sample_violation.jpg` (a sample image of a by-law violation)
3.  **Open the Notebook:**
    Upload and open `BramptonEnforcement_Factory.ipynb` in Google Colab.
4.  **Add Colab Secrets:**
    * In Colab, click the "Secrets" (ðŸ”‘) tab and add:
        * `GEMINI_API_KEY`: Your Google AI Studio API key.
        * `GITHUB_TOKEN`: A GitHub Personal Access Token with `repo` permissions.
5.  **Run the Notebook:**
    * Fill in your `GITHUB_EMAIL` in cell `1.5`.
    * Run all cells from top to bottom.
    * The notebook will generate the mock `complaints.csv`, build all app pages, and push the final, deployable app to this GitHub repository.
6.  **Deploy on Streamlit Cloud:**
    * Connect this GitHub repo to your Streamlit Community Cloud account (if you haven't already), pointing to `Dashboard.py` as the main file.
    * In the app's **Settings > Secrets**, add your `GEMINI_API_KEY`.
    * The `packages.txt` file will automatically install `ffmpeg`, and the app will go live.

---

## ðŸ“„ License

This project is open-sourced under the MIT License.
